{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"audioManager\", {\n    enumerable: true,\n    get: function () {\n      return audioManager;\n    }\n  });\n  /**\n   * Audio Manager â€” OrbCast\n   *\n   * In Expo managed workflow, full system audio capture is NOT possible without\n   * a custom dev build. This module provides:\n   *  1. Demo mode: simulated audio signal (drives the orb in UI preview)\n   *  2. Architecture stubs for real capture (custom build path)\n   *\n   * See /docs/limitations.md for full explanation.\n   */\n\n  class AudioManager {\n    _mode = 'demo';\n    _interval = null;\n    _callbacks = new Set();\n    _t = 0; // animation clock\n    _volume = 0.5;\n    get mode() {\n      return this._mode;\n    }\n    subscribe(cb) {\n      this._callbacks.add(cb);\n      return () => this._callbacks.delete(cb);\n    }\n    setVolume(v) {\n      this._volume = Math.max(0, Math.min(1, v));\n    }\n    start(mode = 'demo') {\n      this.stop();\n      this._mode = mode;\n      if (mode === 'demo') {\n        this._startDemoMode();\n      } else if (mode === 'mic') {\n        // TODO: use expo-av Audio.Recording in a custom build\n        console.warn('[AudioManager] Mic mode requires expo-av with custom permissions.');\n        this._startDemoMode();\n      } else {\n        // 'system' / 'blocked'\n        console.warn('[AudioManager] System audio capture blocked on Android managed workflow.');\n        this._mode = 'blocked';\n        this._emit({\n          energy: 0,\n          bass: 0,\n          presence: 0,\n          volume: this._volume\n        });\n      }\n    }\n    stop() {\n      if (this._interval) {\n        clearInterval(this._interval);\n        this._interval = null;\n      }\n      this._t = 0;\n    }\n    _startDemoMode() {\n      this._interval = setInterval(() => {\n        this._t += 0.05;\n        const t = this._t;\n\n        // Simulate realistic audio energy pattern\n        const energy = 0.3 + 0.25 * Math.sin(t * 1.7) + 0.15 * Math.sin(t * 3.3) + 0.08 * Math.sin(t * 7.1) * (0.5 + 0.5 * Math.sin(t * 0.3));\n        const bass = 0.2 + 0.3 * Math.pow(Math.abs(Math.sin(t * 0.8)), 0.5) + 0.1 * Math.sin(t * 2.1);\n        const presence = 0.3 + 0.2 * Math.sin(t * 2.5 + 1) + 0.1 * Math.cos(t * 5.0);\n        this._emit({\n          energy: Math.max(0, Math.min(1, energy)),\n          bass: Math.max(0, Math.min(1, bass)),\n          presence: Math.max(0, Math.min(1, presence)),\n          volume: this._volume\n        });\n      }, 50); // 20fps signal updates\n    }\n    _emit(metrics) {\n      this._callbacks.forEach(cb => cb(metrics));\n    }\n  }\n  const audioManager = new AudioManager();\n});","lineCount":90,"map":[[7,2,105,0,"Object"],[7,8,105,0],[7,9,105,0,"defineProperty"],[7,23,105,0],[7,24,105,0,"exports"],[7,31,105,0],[8,4,105,0,"enumerable"],[8,14,105,0],[9,4,105,0,"get"],[9,7,105,0],[9,18,105,0,"get"],[9,19,105,0],[10,6,105,0],[10,13,105,0,"audioManager"],[10,25,105,0],[11,4,105,0],[12,2,105,0],[13,2,1,0],[14,0,2,0],[15,0,3,0],[16,0,4,0],[17,0,5,0],[18,0,6,0],[19,0,7,0],[20,0,8,0],[21,0,9,0],[22,0,10,0],[24,2,23,0],[24,8,23,6,"AudioManager"],[24,20,23,18],[24,21,23,19],[25,4,24,10,"_mode"],[25,9,24,15],[25,12,24,31],[25,18,24,37],[26,4,25,10,"_interval"],[26,13,25,19],[26,16,25,61],[26,20,25,65],[27,4,26,10,"_callbacks"],[27,14,26,20],[27,17,26,45],[27,21,26,49,"Set"],[27,24,26,52],[27,25,26,53],[27,26,26,54],[28,4,27,10,"_t"],[28,6,27,12],[28,9,27,15],[28,10,27,16],[28,11,27,17],[28,12,27,18],[29,4,28,10,"_volume"],[29,11,28,17],[29,14,28,20],[29,17,28,23],[30,4,30,2],[30,8,30,6,"mode"],[30,12,30,10,"mode"],[30,13,30,10],[30,15,30,26],[31,6,31,4],[31,13,31,11],[31,17,31,15],[31,18,31,16,"_mode"],[31,23,31,21],[32,4,32,2],[33,4,34,2,"subscribe"],[33,13,34,11,"subscribe"],[33,14,34,12,"cb"],[33,16,34,31],[33,18,34,45],[34,6,35,4],[34,10,35,8],[34,11,35,9,"_callbacks"],[34,21,35,19],[34,22,35,20,"add"],[34,25,35,23],[34,26,35,24,"cb"],[34,28,35,26],[34,29,35,27],[35,6,36,4],[35,13,36,11],[35,19,36,17],[35,23,36,21],[35,24,36,22,"_callbacks"],[35,34,36,32],[35,35,36,33,"delete"],[35,41,36,39],[35,42,36,40,"cb"],[35,44,36,42],[35,45,36,43],[36,4,37,2],[37,4,39,2,"setVolume"],[37,13,39,11,"setVolume"],[37,14,39,12,"v"],[37,15,39,21],[37,17,39,23],[38,6,40,4],[38,10,40,8],[38,11,40,9,"_volume"],[38,18,40,16],[38,21,40,19,"Math"],[38,25,40,23],[38,26,40,24,"max"],[38,29,40,27],[38,30,40,28],[38,31,40,29],[38,33,40,31,"Math"],[38,37,40,35],[38,38,40,36,"min"],[38,41,40,39],[38,42,40,40],[38,43,40,41],[38,45,40,43,"v"],[38,46,40,44],[38,47,40,45],[38,48,40,46],[39,4,41,2],[40,4,43,2,"start"],[40,9,43,7,"start"],[40,10,43,8,"mode"],[40,14,43,25],[40,17,43,28],[40,23,43,34],[40,25,43,36],[41,6,44,4],[41,10,44,8],[41,11,44,9,"stop"],[41,15,44,13],[41,16,44,14],[41,17,44,15],[42,6,45,4],[42,10,45,8],[42,11,45,9,"_mode"],[42,16,45,14],[42,19,45,17,"mode"],[42,23,45,21],[43,6,47,4],[43,10,47,8,"mode"],[43,14,47,12],[43,19,47,17],[43,25,47,23],[43,27,47,25],[44,8,48,6],[44,12,48,10],[44,13,48,11,"_startDemoMode"],[44,27,48,25],[44,28,48,26],[44,29,48,27],[45,6,49,4],[45,7,49,5],[45,13,49,11],[45,17,49,15,"mode"],[45,21,49,19],[45,26,49,24],[45,31,49,29],[45,33,49,31],[46,8,50,6],[47,8,51,6,"console"],[47,15,51,13],[47,16,51,14,"warn"],[47,20,51,18],[47,21,51,19],[47,88,51,86],[47,89,51,87],[48,8,52,6],[48,12,52,10],[48,13,52,11,"_startDemoMode"],[48,27,52,25],[48,28,52,26],[48,29,52,27],[49,6,53,4],[49,7,53,5],[49,13,53,11],[50,8,54,6],[51,8,55,6,"console"],[51,15,55,13],[51,16,55,14,"warn"],[51,20,55,18],[51,21,55,19],[51,95,55,93],[51,96,55,94],[52,8,56,6],[52,12,56,10],[52,13,56,11,"_mode"],[52,18,56,16],[52,21,56,19],[52,30,56,28],[53,8,57,6],[53,12,57,10],[53,13,57,11,"_emit"],[53,18,57,16],[53,19,57,17],[54,10,57,19,"energy"],[54,16,57,25],[54,18,57,27],[54,19,57,28],[55,10,57,30,"bass"],[55,14,57,34],[55,16,57,36],[55,17,57,37],[56,10,57,39,"presence"],[56,18,57,47],[56,20,57,49],[56,21,57,50],[57,10,57,52,"volume"],[57,16,57,58],[57,18,57,60],[57,22,57,64],[57,23,57,65,"_volume"],[58,8,57,73],[58,9,57,74],[58,10,57,75],[59,6,58,4],[60,4,59,2],[61,4,61,2,"stop"],[61,8,61,6,"stop"],[61,9,61,6],[61,11,61,9],[62,6,62,4],[62,10,62,8],[62,14,62,12],[62,15,62,13,"_interval"],[62,24,62,22],[62,26,62,24],[63,8,63,6,"clearInterval"],[63,21,63,19],[63,22,63,20],[63,26,63,24],[63,27,63,25,"_interval"],[63,36,63,34],[63,37,63,35],[64,8,64,6],[64,12,64,10],[64,13,64,11,"_interval"],[64,22,64,20],[64,25,64,23],[64,29,64,27],[65,6,65,4],[66,6,66,4],[66,10,66,8],[66,11,66,9,"_t"],[66,13,66,11],[66,16,66,14],[66,17,66,15],[67,4,67,2],[68,4,69,10,"_startDemoMode"],[68,18,69,24,"_startDemoMode"],[68,19,69,24],[68,21,69,27],[69,6,70,4],[69,10,70,8],[69,11,70,9,"_interval"],[69,20,70,18],[69,23,70,21,"setInterval"],[69,34,70,32],[69,35,70,33],[69,41,70,39],[70,8,71,6],[70,12,71,10],[70,13,71,11,"_t"],[70,15,71,13],[70,19,71,17],[70,23,71,21],[71,8,72,6],[71,14,72,12,"t"],[71,15,72,13],[71,18,72,16],[71,22,72,20],[71,23,72,21,"_t"],[71,25,72,23],[73,8,74,6],[74,8,75,6],[74,14,75,12,"energy"],[74,20,75,18],[74,23,76,8],[74,26,76,11],[74,29,77,8],[74,33,77,12],[74,36,77,15,"Math"],[74,40,77,19],[74,41,77,20,"sin"],[74,44,77,23],[74,45,77,24,"t"],[74,46,77,25],[74,49,77,28],[74,52,77,31],[74,53,77,32],[74,56,78,8],[74,60,78,12],[74,63,78,15,"Math"],[74,67,78,19],[74,68,78,20,"sin"],[74,71,78,23],[74,72,78,24,"t"],[74,73,78,25],[74,76,78,28],[74,79,78,31],[74,80,78,32],[74,83,79,8],[74,87,79,12],[74,90,79,15,"Math"],[74,94,79,19],[74,95,79,20,"sin"],[74,98,79,23],[74,99,79,24,"t"],[74,100,79,25],[74,103,79,28],[74,106,79,31],[74,107,79,32],[74,111,79,36],[74,114,79,39],[74,117,79,42],[74,120,79,45],[74,123,79,48,"Math"],[74,127,79,52],[74,128,79,53,"sin"],[74,131,79,56],[74,132,79,57,"t"],[74,133,79,58],[74,136,79,61],[74,139,79,64],[74,140,79,65],[74,141,79,66],[75,8,81,6],[75,14,81,12,"bass"],[75,18,81,16],[75,21,82,8],[75,24,82,11],[75,27,83,8],[75,30,83,11],[75,33,83,14,"Math"],[75,37,83,18],[75,38,83,19,"pow"],[75,41,83,22],[75,42,83,23,"Math"],[75,46,83,27],[75,47,83,28,"abs"],[75,50,83,31],[75,51,83,32,"Math"],[75,55,83,36],[75,56,83,37,"sin"],[75,59,83,40],[75,60,83,41,"t"],[75,61,83,42],[75,64,83,45],[75,67,83,48],[75,68,83,49],[75,69,83,50],[75,71,83,52],[75,74,83,55],[75,75,83,56],[75,78,84,8],[75,81,84,11],[75,84,84,14,"Math"],[75,88,84,18],[75,89,84,19,"sin"],[75,92,84,22],[75,93,84,23,"t"],[75,94,84,24],[75,97,84,27],[75,100,84,30],[75,101,84,31],[76,8,86,6],[76,14,86,12,"presence"],[76,22,86,20],[76,25,87,8],[76,28,87,11],[76,31,88,8],[76,34,88,11],[76,37,88,14,"Math"],[76,41,88,18],[76,42,88,19,"sin"],[76,45,88,22],[76,46,88,23,"t"],[76,47,88,24],[76,50,88,27],[76,53,88,30],[76,56,88,33],[76,57,88,34],[76,58,88,35],[76,61,89,8],[76,64,89,11],[76,67,89,14,"Math"],[76,71,89,18],[76,72,89,19,"cos"],[76,75,89,22],[76,76,89,23,"t"],[76,77,89,24],[76,80,89,27],[76,83,89,30],[76,84,89,31],[77,8,91,6],[77,12,91,10],[77,13,91,11,"_emit"],[77,18,91,16],[77,19,91,17],[78,10,92,8,"energy"],[78,16,92,14],[78,18,92,16,"Math"],[78,22,92,20],[78,23,92,21,"max"],[78,26,92,24],[78,27,92,25],[78,28,92,26],[78,30,92,28,"Math"],[78,34,92,32],[78,35,92,33,"min"],[78,38,92,36],[78,39,92,37],[78,40,92,38],[78,42,92,40,"energy"],[78,48,92,46],[78,49,92,47],[78,50,92,48],[79,10,93,8,"bass"],[79,14,93,12],[79,16,93,14,"Math"],[79,20,93,18],[79,21,93,19,"max"],[79,24,93,22],[79,25,93,23],[79,26,93,24],[79,28,93,26,"Math"],[79,32,93,30],[79,33,93,31,"min"],[79,36,93,34],[79,37,93,35],[79,38,93,36],[79,40,93,38,"bass"],[79,44,93,42],[79,45,93,43],[79,46,93,44],[80,10,94,8,"presence"],[80,18,94,16],[80,20,94,18,"Math"],[80,24,94,22],[80,25,94,23,"max"],[80,28,94,26],[80,29,94,27],[80,30,94,28],[80,32,94,30,"Math"],[80,36,94,34],[80,37,94,35,"min"],[80,40,94,38],[80,41,94,39],[80,42,94,40],[80,44,94,42,"presence"],[80,52,94,50],[80,53,94,51],[80,54,94,52],[81,10,95,8,"volume"],[81,16,95,14],[81,18,95,16],[81,22,95,20],[81,23,95,21,"_volume"],[82,8,96,6],[82,9,96,7],[82,10,96,8],[83,6,97,4],[83,7,97,5],[83,9,97,7],[83,11,97,9],[83,12,97,10],[83,13,97,11],[83,14,97,12],[84,4,98,2],[85,4,100,10,"_emit"],[85,9,100,15,"_emit"],[85,10,100,16,"metrics"],[85,17,100,37],[85,19,100,39],[86,6,101,4],[86,10,101,8],[86,11,101,9,"_callbacks"],[86,21,101,19],[86,22,101,20,"forEach"],[86,29,101,27],[86,30,101,29,"cb"],[86,32,101,31],[86,36,101,36,"cb"],[86,38,101,38],[86,39,101,39,"metrics"],[86,46,101,46],[86,47,101,47],[86,48,101,48],[87,4,102,2],[88,2,103,0],[89,2,105,7],[89,8,105,13,"audioManager"],[89,20,105,25],[89,23,105,28],[89,27,105,32,"AudioManager"],[89,39,105,44],[89,40,105,45],[89,41,105,46],[90,0,105,47],[90,3]],"functionMap":{"names":["<global>","AudioManager","AudioManager#get__mode","AudioManager#subscribe","<anonymous>","AudioManager#setVolume","AudioManager#start","AudioManager#stop","AudioManager#_startDemoMode","setInterval$argument_0","AudioManager#_emit","_callbacks.forEach$argument_0"],"mappings":"AAA;ACsB;ECO;GDE;EEE;WCE,gCD;GFC;EIE;GJE;EKE;GLgB;EME;GNM;EOE;iCCC;KD2B;GPC;ESE;4BCC,mBD;GTC;CDC"},"hasCjsExports":false},"type":"js/module"}]}