{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"AVTRANSPORT_SERVICE\", {\n    enumerable: true,\n    get: function () {\n      return AVTRANSPORT_SERVICE;\n    }\n  });\n  Object.defineProperty(exports, \"RENDERING_CONTROL_SERVICE\", {\n    enumerable: true,\n    get: function () {\n      return RENDERING_CONTROL_SERVICE;\n    }\n  });\n  Object.defineProperty(exports, \"AVTRANSPORT_PATH\", {\n    enumerable: true,\n    get: function () {\n      return AVTRANSPORT_PATH;\n    }\n  });\n  Object.defineProperty(exports, \"RENDERING_PATH\", {\n    enumerable: true,\n    get: function () {\n      return RENDERING_PATH;\n    }\n  });\n  exports.buildSoapEnvelope = buildSoapEnvelope;\n  exports.sendSoapCommand = sendSoapCommand;\n  exports.buildSetAVTransportURI = buildSetAVTransportURI;\n  exports.buildPlay = buildPlay;\n  exports.buildStop = buildStop;\n  exports.buildSetVolume = buildSetVolume;\n  exports.buildGetVolume = buildGetVolume;\n  /**\n   * Minimal UPnP/SOAP client for Sonos control.\n   * Builds and sends SOAP envelopes to Sonos AVTransport and RenderingControl services.\n   */\n\n  const AVTRANSPORT_SERVICE = 'urn:schemas-upnp-org:service:AVTransport:1';\n  const RENDERING_CONTROL_SERVICE = 'urn:schemas-upnp-org:service:RenderingControl:1';\n  const AVTRANSPORT_PATH = '/MediaRenderer/AVTransport/Control';\n  const RENDERING_PATH = '/MediaRenderer/RenderingControl/Control';\n\n  /**\n   * Build a SOAP envelope for a UPnP action.\n   */\n  function buildSoapEnvelope(serviceType, action, params) {\n    const paramXml = Object.entries(params).map(([k, v]) => `<${k}>${v}</${k}>`).join('');\n    return '<?xml version=\"1.0\" encoding=\"utf-8\"?>' + '<s:Envelope xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\" ' + 's:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\">' + '<s:Body>' + `<u:${action} xmlns:u=\"${serviceType}\">` + paramXml + `</u:${action}>` + '</s:Body>' + '</s:Envelope>';\n  }\n\n  /**\n   * Send a SOAP command to a Sonos device.\n   */\n  async function sendSoapCommand(ip, port, path, serviceType, action, params) {\n    const url = `http://${ip}:${port}${path}`;\n    const body = buildSoapEnvelope(serviceType, action, params);\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'text/xml; charset=\"utf-8\"',\n        SOAPAction: `\"${serviceType}#${action}\"`\n      },\n      body\n    });\n    if (!response.ok) {\n      throw new Error(`SOAP error ${response.status}: ${await response.text()}`);\n    }\n    return response.text();\n  }\n\n  // ─── AVTransport Commands ─────────────────────────────────────────────────────\n\n  function buildSetAVTransportURI(streamUrl) {\n    return buildSoapEnvelope(AVTRANSPORT_SERVICE, 'SetAVTransportURI', {\n      InstanceID: 0,\n      CurrentURI: streamUrl,\n      CurrentURIMetaData: ''\n    });\n  }\n  function buildPlay() {\n    return buildSoapEnvelope(AVTRANSPORT_SERVICE, 'Play', {\n      InstanceID: 0,\n      Speed: 1\n    });\n  }\n  function buildStop() {\n    return buildSoapEnvelope(AVTRANSPORT_SERVICE, 'Stop', {\n      InstanceID: 0\n    });\n  }\n\n  // ─── RenderingControl Commands ────────────────────────────────────────────────\n\n  function buildSetVolume(volume) {\n    return buildSoapEnvelope(RENDERING_CONTROL_SERVICE, 'SetVolume', {\n      InstanceID: 0,\n      Channel: 'Master',\n      DesiredVolume: Math.round(volume * 100)\n    });\n  }\n  function buildGetVolume() {\n    return buildSoapEnvelope(RENDERING_CONTROL_SERVICE, 'GetVolume', {\n      InstanceID: 0,\n      Channel: 'Master'\n    });\n  }\n});","lineCount":112,"map":[[7,2,6,0,"Object"],[7,8,6,0],[7,9,6,0,"defineProperty"],[7,23,6,0],[7,24,6,0,"exports"],[7,31,6,0],[8,4,6,0,"enumerable"],[8,14,6,0],[9,4,6,0,"get"],[9,7,6,0],[9,18,6,0,"get"],[9,19,6,0],[10,6,6,0],[10,13,6,0,"AVTRANSPORT_SERVICE"],[10,32,6,0],[11,4,6,0],[12,2,6,0],[13,2,7,0,"Object"],[13,8,7,0],[13,9,7,0,"defineProperty"],[13,23,7,0],[13,24,7,0,"exports"],[13,31,7,0],[14,4,7,0,"enumerable"],[14,14,7,0],[15,4,7,0,"get"],[15,7,7,0],[15,18,7,0,"get"],[15,19,7,0],[16,6,7,0],[16,13,7,0,"RENDERING_CONTROL_SERVICE"],[16,38,7,0],[17,4,7,0],[18,2,7,0],[19,2,9,0,"Object"],[19,8,9,0],[19,9,9,0,"defineProperty"],[19,23,9,0],[19,24,9,0,"exports"],[19,31,9,0],[20,4,9,0,"enumerable"],[20,14,9,0],[21,4,9,0,"get"],[21,7,9,0],[21,18,9,0,"get"],[21,19,9,0],[22,6,9,0],[22,13,9,0,"AVTRANSPORT_PATH"],[22,29,9,0],[23,4,9,0],[24,2,9,0],[25,2,10,0,"Object"],[25,8,10,0],[25,9,10,0,"defineProperty"],[25,23,10,0],[25,24,10,0,"exports"],[25,31,10,0],[26,4,10,0,"enumerable"],[26,14,10,0],[27,4,10,0,"get"],[27,7,10,0],[27,18,10,0,"get"],[27,19,10,0],[28,6,10,0],[28,13,10,0,"RENDERING_PATH"],[28,27,10,0],[29,4,10,0],[30,2,10,0],[31,2,15,0,"exports"],[31,9,15,0],[31,10,15,0,"buildSoapEnvelope"],[31,27,15,0],[31,30,15,0,"buildSoapEnvelope"],[31,47,15,0],[32,2,40,0,"exports"],[32,9,40,0],[32,10,40,0,"sendSoapCommand"],[32,25,40,0],[32,28,40,0,"sendSoapCommand"],[32,43,40,0],[33,2,69,0,"exports"],[33,9,69,0],[33,10,69,0,"buildSetAVTransportURI"],[33,32,69,0],[33,35,69,0,"buildSetAVTransportURI"],[33,57,69,0],[34,2,77,0,"exports"],[34,9,77,0],[34,10,77,0,"buildPlay"],[34,19,77,0],[34,22,77,0,"buildPlay"],[34,31,77,0],[35,2,84,0,"exports"],[35,9,84,0],[35,10,84,0,"buildStop"],[35,19,84,0],[35,22,84,0,"buildStop"],[35,31,84,0],[36,2,92,0,"exports"],[36,9,92,0],[36,10,92,0,"buildSetVolume"],[36,24,92,0],[36,27,92,0,"buildSetVolume"],[36,41,92,0],[37,2,100,0,"exports"],[37,9,100,0],[37,10,100,0,"buildGetVolume"],[37,24,100,0],[37,27,100,0,"buildGetVolume"],[37,41,100,0],[38,2,1,0],[39,0,2,0],[40,0,3,0],[41,0,4,0],[43,2,6,7],[43,8,6,13,"AVTRANSPORT_SERVICE"],[43,27,6,32],[43,30,6,35],[43,74,6,79],[44,2,7,7],[44,8,7,13,"RENDERING_CONTROL_SERVICE"],[44,33,7,38],[44,36,7,41],[44,85,7,90],[45,2,9,7],[45,8,9,13,"AVTRANSPORT_PATH"],[45,24,9,29],[45,27,9,32],[45,63,9,68],[46,2,10,7],[46,8,10,13,"RENDERING_PATH"],[46,22,10,27],[46,25,10,30],[46,66,10,71],[48,2,12,0],[49,0,13,0],[50,0,14,0],[51,2,15,7],[51,11,15,16,"buildSoapEnvelope"],[51,28,15,33,"buildSoapEnvelope"],[51,29,16,2,"serviceType"],[51,40,16,21],[51,42,17,2,"action"],[51,48,17,16],[51,50,18,2,"params"],[51,56,18,41],[51,58,19,10],[52,4,20,2],[52,10,20,8,"paramXml"],[52,18,20,16],[52,21,20,19,"Object"],[52,27,20,25],[52,28,20,26,"entries"],[52,35,20,33],[52,36,20,34,"params"],[52,42,20,40],[52,43,20,41],[52,44,21,5,"map"],[52,47,21,8],[52,48,21,9],[52,49,21,10],[52,50,21,11,"k"],[52,51,21,12],[52,53,21,14,"v"],[52,54,21,15],[52,55,21,16],[52,60,21,21],[52,64,21,25,"k"],[52,65,21,26],[52,69,21,30,"v"],[52,70,21,31],[52,75,21,36,"k"],[52,76,21,37],[52,79,21,40],[52,80,21,41],[52,81,22,5,"join"],[52,85,22,9],[52,86,22,10],[52,88,22,12],[52,89,22,13],[53,4,24,2],[53,11,25,4],[53,51,25,44],[53,54,26,4],[53,120,26,70],[53,123,27,4],[53,185,27,66],[53,188,28,4],[53,198,28,14],[53,201,29,4],[53,207,29,10,"action"],[53,213,29,16],[53,226,29,29,"serviceType"],[53,237,29,40],[53,241,29,44],[53,244,30,4,"paramXml"],[53,252,30,12],[53,255,31,4],[53,262,31,11,"action"],[53,268,31,17],[53,271,31,20],[53,274,32,4],[53,285,32,15],[53,288,33,4],[53,303,33,19],[54,2,35,0],[56,2,37,0],[57,0,38,0],[58,0,39,0],[59,2,40,7],[59,17,40,22,"sendSoapCommand"],[59,32,40,37,"sendSoapCommand"],[59,33,41,2,"ip"],[59,35,41,12],[59,37,42,2,"port"],[59,41,42,14],[59,43,43,2,"path"],[59,47,43,14],[59,49,44,2,"serviceType"],[59,60,44,21],[59,62,45,2,"action"],[59,68,45,16],[59,70,46,2,"params"],[59,76,46,41],[59,78,47,19],[60,4,48,2],[60,10,48,8,"url"],[60,13,48,11],[60,16,48,14],[60,26,48,24,"ip"],[60,28,48,26],[60,32,48,30,"port"],[60,36,48,34],[60,39,48,37,"path"],[60,43,48,41],[60,45,48,43],[61,4,49,2],[61,10,49,8,"body"],[61,14,49,12],[61,17,49,15,"buildSoapEnvelope"],[61,34,49,32],[61,35,49,33,"serviceType"],[61,46,49,44],[61,48,49,46,"action"],[61,54,49,52],[61,56,49,54,"params"],[61,62,49,60],[61,63,49,61],[62,4,51,2],[62,10,51,8,"response"],[62,18,51,16],[62,21,51,19],[62,27,51,25,"fetch"],[62,32,51,30],[62,33,51,31,"url"],[62,36,51,34],[62,38,51,36],[63,6,52,4,"method"],[63,12,52,10],[63,14,52,12],[63,20,52,18],[64,6,53,4,"headers"],[64,13,53,11],[64,15,53,13],[65,8,54,6],[65,22,54,20],[65,24,54,22],[65,51,54,49],[66,8,55,6,"SOAPAction"],[66,18,55,16],[66,20,55,18],[66,24,55,22,"serviceType"],[66,35,55,33],[66,39,55,37,"action"],[66,45,55,43],[67,6,56,4],[67,7,56,5],[68,6,57,4,"body"],[69,4,58,2],[69,5,58,3],[69,6,58,4],[70,4,60,2],[70,8,60,6],[70,9,60,7,"response"],[70,17,60,15],[70,18,60,16,"ok"],[70,20,60,18],[70,22,60,20],[71,6,61,4],[71,12,61,10],[71,16,61,14,"Error"],[71,21,61,19],[71,22,61,20],[71,36,61,34,"response"],[71,44,61,42],[71,45,61,43,"status"],[71,51,61,49],[71,56,61,54],[71,62,61,60,"response"],[71,70,61,68],[71,71,61,69,"text"],[71,75,61,73],[71,76,61,74],[71,77,61,75],[71,79,61,77],[71,80,61,78],[72,4,62,2],[73,4,64,2],[73,11,64,9,"response"],[73,19,64,17],[73,20,64,18,"text"],[73,24,64,22],[73,25,64,23],[73,26,64,24],[74,2,65,0],[76,2,67,0],[78,2,69,7],[78,11,69,16,"buildSetAVTransportURI"],[78,33,69,38,"buildSetAVTransportURI"],[78,34,69,39,"streamUrl"],[78,43,69,56],[78,45,69,66],[79,4,70,2],[79,11,70,9,"buildSoapEnvelope"],[79,28,70,26],[79,29,70,27,"AVTRANSPORT_SERVICE"],[79,48,70,46],[79,50,70,48],[79,69,70,67],[79,71,70,69],[80,6,71,4,"InstanceID"],[80,16,71,14],[80,18,71,16],[80,19,71,17],[81,6,72,4,"CurrentURI"],[81,16,72,14],[81,18,72,16,"streamUrl"],[81,27,72,25],[82,6,73,4,"CurrentURIMetaData"],[82,24,73,22],[82,26,73,24],[83,4,74,2],[83,5,74,3],[83,6,74,4],[84,2,75,0],[85,2,77,7],[85,11,77,16,"buildPlay"],[85,20,77,25,"buildPlay"],[85,21,77,25],[85,23,77,36],[86,4,78,2],[86,11,78,9,"buildSoapEnvelope"],[86,28,78,26],[86,29,78,27,"AVTRANSPORT_SERVICE"],[86,48,78,46],[86,50,78,48],[86,56,78,54],[86,58,78,56],[87,6,79,4,"InstanceID"],[87,16,79,14],[87,18,79,16],[87,19,79,17],[88,6,80,4,"Speed"],[88,11,80,9],[88,13,80,11],[89,4,81,2],[89,5,81,3],[89,6,81,4],[90,2,82,0],[91,2,84,7],[91,11,84,16,"buildStop"],[91,20,84,25,"buildStop"],[91,21,84,25],[91,23,84,36],[92,4,85,2],[92,11,85,9,"buildSoapEnvelope"],[92,28,85,26],[92,29,85,27,"AVTRANSPORT_SERVICE"],[92,48,85,46],[92,50,85,48],[92,56,85,54],[92,58,85,56],[93,6,86,4,"InstanceID"],[93,16,86,14],[93,18,86,16],[94,4,87,2],[94,5,87,3],[94,6,87,4],[95,2,88,0],[97,2,90,0],[99,2,92,7],[99,11,92,16,"buildSetVolume"],[99,25,92,30,"buildSetVolume"],[99,26,92,31,"volume"],[99,32,92,45],[99,34,92,55],[100,4,93,2],[100,11,93,9,"buildSoapEnvelope"],[100,28,93,26],[100,29,93,27,"RENDERING_CONTROL_SERVICE"],[100,54,93,52],[100,56,93,54],[100,67,93,65],[100,69,93,67],[101,6,94,4,"InstanceID"],[101,16,94,14],[101,18,94,16],[101,19,94,17],[102,6,95,4,"Channel"],[102,13,95,11],[102,15,95,13],[102,23,95,21],[103,6,96,4,"DesiredVolume"],[103,19,96,17],[103,21,96,19,"Math"],[103,25,96,23],[103,26,96,24,"round"],[103,31,96,29],[103,32,96,30,"volume"],[103,38,96,36],[103,41,96,39],[103,44,96,42],[104,4,97,2],[104,5,97,3],[104,6,97,4],[105,2,98,0],[106,2,100,7],[106,11,100,16,"buildGetVolume"],[106,25,100,30,"buildGetVolume"],[106,26,100,30],[106,28,100,41],[107,4,101,2],[107,11,101,9,"buildSoapEnvelope"],[107,28,101,26],[107,29,101,27,"RENDERING_CONTROL_SERVICE"],[107,54,101,52],[107,56,101,54],[107,67,101,65],[107,69,101,67],[108,6,102,4,"InstanceID"],[108,16,102,14],[108,18,102,16],[108,19,102,17],[109,6,103,4,"Channel"],[109,13,103,11],[109,15,103,13],[110,4,104,2],[110,5,104,3],[110,6,104,4],[111,2,105,0],[112,0,105,1],[112,3]],"functionMap":{"names":["<global>","buildSoapEnvelope","Object.entries.map$argument_0","sendSoapCommand","buildSetAVTransportURI","buildPlay","buildStop","buildSetVolume","buildGetVolume"],"mappings":"AAA;OCc;SCM,+BD;CDc;OGK;CHyB;OII;CJM;OKE;CLK;OME;CNI;OOI;CPM;OQE;CRK"},"hasCjsExports":false},"type":"js/module"}]}