{"dependencies":[{"name":"../constants","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":17,"index":123},"end":{"line":7,"column":40,"index":146}}],"key":"zmjjtqoQxi2W71eIMIIaEi1mOpU=","exportNames":["*"],"imports":1}},{"name":"../interfaces","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":18,"index":166},"end":{"line":8,"column":42,"index":190}}],"key":"596k1m46J08d+Af0Max0usWU1VI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,e,d){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var t=r(d[0]),s=r(d[1]);e.default=class{inProgress=!1;constructor(s){this.onScaleBegin=s.onScaleBegin,this.onScale=s.onScale,this.onScaleEnd=s.onScaleEnd,this.spanSlop=2*t.DEFAULT_TOUCH_SLOP,this.minSpan=0}onTouchEvent(t,n){this.currentTime=t.time;const h=t.eventType,o=n.trackedPointersCount,c=h===s.EventTypes.UP||h===s.EventTypes.ADDITIONAL_POINTER_UP||h===s.EventTypes.CANCEL;if((h===s.EventTypes.DOWN||c)&&(this.inProgress&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=0),c))return!0;const p=h===s.EventTypes.DOWN||h===s.EventTypes.ADDITIONAL_POINTER_UP||h===s.EventTypes.ADDITIONAL_POINTER_DOWN,u=h===s.EventTypes.ADDITIONAL_POINTER_UP,S=u?t.pointerId:void 0,l=u?o-1:o,T=n.getAbsoluteCoordsSum(),v=T.x/l,E=T.y/l;let _=0,P=0;n.trackedPointers.forEach((t,s)=>{s!==S&&(_+=Math.abs(t.abosoluteCoords.x-v),P+=Math.abs(t.abosoluteCoords.y-E))});const O=2*(_/l),y=2*(P/l),D=Math.hypot(O,y),I=this.inProgress;return this._focusX=v,this._focusY=E,this.inProgress&&(D<this.minSpan||p)&&(this.onScaleEnd(this),this.inProgress=!1,this.initialSpan=D),p&&(this.initialSpan=this.prevSpan=this._currentSpan=D),!this.inProgress&&D>=this.minSpan&&(I||Math.abs(D-this.initialSpan)>this.spanSlop)&&(this.prevSpan=this._currentSpan=D,this.prevTime=this.currentTime,this.inProgress=this.onScaleBegin(this)),h!==s.EventTypes.MOVE||(this._currentSpan=D,this.inProgress&&!this.onScale(this)||(this.prevSpan=this.currentSpan,this.prevTime=this.currentTime),!0)}calculateScaleFactor(t){return t<2?1:this.prevSpan>0?this.currentSpan/this.prevSpan:1}get currentSpan(){return this._currentSpan}get focusX(){return this._focusX}get focusY(){return this._focusY}get timeDelta(){return this.currentTime-this.prevTime}}});","lineCount":1,"map":[[1,28,1,0],[1,41,3,0,"Object"],[1,48,3,7,"defineProperty"],[1,63,3,22,"exports"],[1,65,3,31],[1,78,3,45],[1,79,4,2,"value"],[1,86,4,9],[1,90,6,0,"exports"],[1,92,6,8,"default"],[1,105,6,15,"undefined"],[1,107,7,0],[1,111,7,4,"_constants"],[1,113,7,17,"require"],[1,115,7,24,"d"],[1,117,7,24],[1,121,8,4,"_interfaces"],[1,123,8,18,"require"],[1,125,8,25,"d"],[1,127,8,25],[1,131,110,0,"exports"],[1,133,110,8,"default"],[1,141,9,0],[1,147,10,2,"inProgress"],[1,159,10,15],[1,161,11,2,"constructor"],[1,173,11,14,"callbacks"],[1,176,12,4,"this"],[1,181,12,9,"onScaleBegin"],[1,194,12,24,"callbacks"],[1,196,12,34,"onScaleBegin"],[1,209,13,4,"this"],[1,214,13,9,"onScale"],[1,222,13,19,"callbacks"],[1,224,13,29,"onScale"],[1,232,14,4,"this"],[1,237,14,9,"onScaleEnd"],[1,248,14,22,"callbacks"],[1,250,14,32,"onScaleEnd"],[1,261,15,4,"this"],[1,266,15,9,"spanSlop"],[1,275,15,52],[1,277,15,20,"_constants"],[1,279,15,31,"DEFAULT_TOUCH_SLOP"],[1,298,16,4,"this"],[1,303,16,9,"minSpan"],[1,311,16,19],[1,312,17,2],[1,313,18,2,"onTouchEvent"],[1,326,18,15,"event"],[1,328,18,22,"tracker"],[1,331,19,4,"this"],[1,336,19,9,"currentTime"],[1,348,19,23,"event"],[1,350,19,29,"time"],[1,355,20,4],[1,361,20,10,"action"],[1,363,20,19,"event"],[1,365,20,25,"eventType"],[1,375,21,10,"numOfPointers"],[1,377,21,26,"tracker"],[1,379,21,34,"trackedPointersCount"],[1,400,22,10,"streamComplete"],[1,402,22,27,"action"],[1,406,22,38,"_interfaces"],[1,408,22,50,"EventTypes"],[1,419,22,61,"UP"],[1,423,22,67,"action"],[1,427,22,78,"_interfaces"],[1,429,22,90,"EventTypes"],[1,440,22,101,"ADDITIONAL_POINTER_UP"],[1,463,22,126,"action"],[1,467,22,137,"_interfaces"],[1,469,22,149,"EventTypes"],[1,480,22,160,"CANCEL"],[1,487,23,4],[1,491,23,8,"action"],[1,495,23,19,"_interfaces"],[1,497,23,31,"EventTypes"],[1,508,23,42,"DOWN"],[1,514,23,50,"streamComplete"],[1,519,24,10,"this"],[1,524,24,15,"inProgress"],[1,537,25,8,"this"],[1,542,25,13,"onScaleEnd"],[1,553,25,24,"this"],[1,559,26,8,"this"],[1,564,26,13,"inProgress"],[1,576,26,26],[1,578,27,8,"this"],[1,583,27,13,"initialSpan"],[1,595,27,27],[1,598,29,10,"streamComplete"],[1,601,30,8],[1,608,30,15],[1,610,33,4],[1,616,33,10,"configChanged"],[1,618,33,26,"action"],[1,622,33,37,"_interfaces"],[1,624,33,49,"EventTypes"],[1,635,33,60,"DOWN"],[1,641,33,68,"action"],[1,645,33,79,"_interfaces"],[1,647,33,91,"EventTypes"],[1,658,33,102,"ADDITIONAL_POINTER_UP"],[1,681,33,127,"action"],[1,685,33,138,"_interfaces"],[1,687,33,150,"EventTypes"],[1,698,33,161,"ADDITIONAL_POINTER_DOWN"],[1,722,34,10,"pointerUp"],[1,724,34,22,"action"],[1,728,34,33,"_interfaces"],[1,730,34,45,"EventTypes"],[1,741,34,56,"ADDITIONAL_POINTER_UP"],[1,763,35,10,"ignoredPointer"],[1,765,35,27,"pointerUp"],[1,767,35,39,"event"],[1,769,35,45,"pointerId"],[1,784,35,57,"undefined"],[1,786,39,10,"div"],[1,788,39,16,"pointerUp"],[1,790,39,28,"numOfPointers"],[1,792,39,44],[1,794,39,48,"numOfPointers"],[1,796,40,10,"coordsSum"],[1,798,40,22,"tracker"],[1,800,40,30,"getAbsoluteCoordsSum"],[1,823,41,10,"focusX"],[1,825,41,19,"coordsSum"],[1,827,41,29,"x"],[1,829,41,33,"div"],[1,831,42,10,"focusY"],[1,833,42,19,"coordsSum"],[1,835,42,29,"y"],[1,837,42,33,"div"],[1,839,46,4],[1,843,46,8,"devSumX"],[1,845,46,18],[1,847,47,8,"devSumY"],[1,849,47,18],[1,851,48,4,"tracker"],[1,853,48,12,"trackedPointers"],[1,869,48,28,"forEach"],[1,877,48,36],[1,878,48,37,"value"],[1,880,48,44,"key"],[1,885,49,10,"key"],[1,889,49,18,"ignoredPointer"],[1,893,52,6,"devSumX"],[1,896,52,17,"Math"],[1,901,52,22,"abs"],[1,905,52,26,"value"],[1,907,52,32,"abosoluteCoords"],[1,923,52,48,"x"],[1,925,52,52,"focusX"],[1,928,53,6,"devSumY"],[1,931,53,17,"Math"],[1,936,53,22,"abs"],[1,940,53,26,"value"],[1,942,53,32,"abosoluteCoords"],[1,958,53,48,"y"],[1,960,53,52,"focusY"],[1,966,55,4],[1,972,57,10,"spanX"],[1,974,57,25],[1,977,55,17,"devSumX"],[1,979,55,27,"div"],[1,982,58,10,"spanY"],[1,984,58,25],[1,987,56,17,"devSumY"],[1,989,56,27,"div"],[1,992,59,10,"span"],[1,994,59,17,"Math"],[1,999,59,22,"hypot"],[1,1005,59,28,"spanX"],[1,1007,59,35,"spanY"],[1,1010,62,10,"wasInProgress"],[1,1012,62,26,"this"],[1,1017,62,31,"inProgress"],[1,1028,80,4],[1,1035,63,4,"this"],[1,1040,63,9,"_focusX"],[1,1048,63,19,"focusX"],[1,1050,64,4,"this"],[1,1055,64,9,"_focusY"],[1,1063,64,19,"focusY"],[1,1065,65,8,"this"],[1,1070,65,13,"inProgress"],[1,1083,65,28,"span"],[1,1085,65,35,"this"],[1,1090,65,40,"minSpan"],[1,1099,65,51,"configChanged"],[1,1104,66,6,"this"],[1,1109,66,11,"onScaleEnd"],[1,1120,66,22,"this"],[1,1126,67,6,"this"],[1,1131,67,11,"inProgress"],[1,1143,67,24],[1,1145,68,6,"this"],[1,1150,68,11,"initialSpan"],[1,1162,68,25,"span"],[1,1165,70,8,"configChanged"],[1,1169,71,6,"this"],[1,1174,71,11,"initialSpan"],[1,1186,71,25,"this"],[1,1191,71,30,"prevSpan"],[1,1200,71,41,"this"],[1,1205,71,46,"_currentSpan"],[1,1218,71,61,"span"],[1,1222,73,9,"this"],[1,1227,73,14,"inProgress"],[1,1239,73,28,"span"],[1,1242,73,36,"this"],[1,1247,73,41,"minSpan"],[1,1257,73,53,"wasInProgress"],[1,1260,73,70,"Math"],[1,1265,73,75,"abs"],[1,1269,73,79,"span"],[1,1271,73,86,"this"],[1,1276,73,91,"initialSpan"],[1,1289,73,106,"this"],[1,1294,73,111,"spanSlop"],[1,1306,74,6,"this"],[1,1311,74,11,"prevSpan"],[1,1320,74,22,"this"],[1,1325,74,27,"_currentSpan"],[1,1338,74,42,"span"],[1,1340,75,6,"this"],[1,1345,75,11,"prevTime"],[1,1354,75,22,"this"],[1,1359,75,27,"currentTime"],[1,1371,76,6,"this"],[1,1376,76,11,"inProgress"],[1,1387,76,24,"this"],[1,1392,76,29,"onScaleBegin"],[1,1405,76,42,"this"],[1,1412,80,8,"action"],[1,1416,80,19,"_interfaces"],[1,1418,80,31,"EventTypes"],[1,1429,80,42,"MOVE"],[1,1436,83,4,"this"],[1,1441,83,9,"_currentSpan"],[1,1454,83,24,"span"],[1,1456,84,8,"this"],[1,1461,84,13,"inProgress"],[1,1474,84,28,"this"],[1,1479,84,33,"onScale"],[1,1487,84,41,"this"],[1,1495,87,4,"this"],[1,1500,87,9,"prevSpan"],[1,1509,87,20,"this"],[1,1514,87,25,"currentSpan"],[1,1526,88,4,"this"],[1,1531,88,9,"prevTime"],[1,1540,88,20,"this"],[1,1545,88,25,"currentTime"],[1,1559,85,13],[1,1561,90,2],[1,1562,91,2,"calculateScaleFactor"],[1,1583,91,23,"numOfPointers"],[1,1586,92,4],[1,1593,92,8,"numOfPointers"],[1,1595,92,24],[1,1597,93,13],[1,1599,95,11,"this"],[1,1604,95,16,"prevSpan"],[1,1613,95,27],[1,1615,95,31,"this"],[1,1620,95,36,"currentSpan"],[1,1632,95,50,"this"],[1,1637,95,55,"prevSpan"],[1,1646,95,66],[1,1647,96,2],[1,1648,97,2],[1,1663,97,6,"currentSpan"],[1,1666,98,4],[1,1673,98,11,"this"],[1,1678,98,16,"_currentSpan"],[1,1690,99,2],[1,1691,100,2],[1,1701,100,6,"focusX"],[1,1704,101,4],[1,1711,101,11,"this"],[1,1716,101,16,"_focusX"],[1,1723,102,2],[1,1724,103,2],[1,1734,103,6,"focusY"],[1,1737,104,4],[1,1744,104,11,"this"],[1,1749,104,16,"_focusY"],[1,1756,105,2],[1,1757,106,2],[1,1770,106,6,"timeDelta"],[1,1773,107,4],[1,1780,107,11,"this"],[1,1785,107,16,"currentTime"],[1,1797,107,30,"this"],[1,1802,107,35,"prevTime"],[1,1810,108,2],[1,1812,110,39],[1,1815]],"functionMap":{"names":["<global>","ScaleGestureDetector","constructor","onTouchEvent","tracker.trackedPointers.forEach$argument_0","calculateScaleFactor","get__currentSpan","get__focusX","get__focusY","get__timeDelta"],"mappings":"AAA;ACQ;ECE;GDM;EEC;oCC8B;KDM;GFoC;EIC;GJK;EKC;GLE;EMC;GNE;EOC;GPE;EQC;GRE;CDC"},"hasCjsExports":true},"type":"js/module"}]}