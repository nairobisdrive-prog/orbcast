{"dependencies":[{"name":"../interfaces","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":18,"index":124},"end":{"line":7,"column":42,"index":148}}],"key":"596k1m46J08d+Af0Max0usWU1VI=","exportNames":["*"],"imports":1}},{"name":"./EventManager","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":43,"index":193},"end":{"line":8,"column":68,"index":218}}],"key":"MV7P0qSLfUx3BNx3HVTE8QBpThU=","exportNames":["*"],"imports":1}},{"name":"../../PointerType","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":19,"index":240},"end":{"line":9,"column":47,"index":268}}],"key":"GAwFf6ECEOo66Cd6tbX5TiUkJ2k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function(g,r,i,a,m,_e,d){\"use strict\";Object.defineProperty(_e,\"__esModule\",{value:!0}),_e.default=void 0;var e,t=r(d[0]),s=(e=r(d[1]))&&e.__esModule?e:{default:e},n=r(d[2]);class c extends s.default{static activationKeys=['Enter',' '];static cancelationKeys=['Tab'];isPressed=!1;static registeredStaticListeners=!1;static instances=new Set;static keyUpStaticCallback=e=>{-1!==this.activationKeys.indexOf(e.key)&&this.instances.forEach(t=>{t.onKeyUp(e)})};keyDownCallback=e=>{-1!==c.cancelationKeys.indexOf(e.key)&&this.isPressed?this.dispatchEvent(e,t.EventTypes.CANCEL):-1!==c.activationKeys.indexOf(e.key)&&this.dispatchEvent(e,t.EventTypes.DOWN)};onKeyUp=e=>{-1!==c.activationKeys.indexOf(e.key)&&this.isPressed&&this.dispatchEvent(e,t.EventTypes.UP)};dispatchEvent(e,s){if(!(e.target instanceof HTMLElement))return;const n=this.mapEvent(e,s);switch(s){case t.EventTypes.UP:this.isPressed=!1,this.onPointerUp(n);break;case t.EventTypes.DOWN:this.isPressed=!0,this.onPointerDown(n);break;case t.EventTypes.CANCEL:this.isPressed=!1,this.onPointerCancel(n)}}registerListeners(){this.view.addEventListener('keydown',this.keyDownCallback),c.instances.add(this),c.registeredStaticListeners||(c.registeredStaticListeners=!0,document.addEventListener('keyup',c.keyUpStaticCallback,{capture:!0}))}unregisterListeners(){this.view.removeEventListener('keydown',this.keyDownCallback),c.instances.delete(this),0===c.instances.size&&(document.removeEventListener('keyup',c.keyUpStaticCallback,{capture:!0}),c.registeredStaticListeners=!1)}mapEvent(e,t){const s=e.target.getBoundingClientRect(),c={x:s?.x+s?.width/2,y:s?.y+s?.height/2},o={x:s?.width/2,y:s?.height/2};return{x:c.x,y:c.y,offsetX:o.x,offsetY:o.y,pointerId:0,eventType:t,pointerType:n.PointerType.KEY,time:e.timeStamp}}}_e.default=c});","lineCount":1,"map":[[1,29,1,0],[1,42,3,0,"Object"],[1,49,3,7,"defineProperty"],[1,64,3,22,"exports"],[1,67,3,31],[1,80,3,45],[1,81,4,2,"value"],[1,88,4,9],[1,92,6,0,"exports"],[1,95,6,8,"default"],[1,108,6,15,"undefined"],[1,110,7,0],[1,114,10,32,"e"],[1,116,7,4,"_interfaces"],[1,118,7,18,"require"],[1,120,7,25,"d"],[1,122,7,25],[1,126,8,4,"_EventManager"],[1,129,10,32,"e"],[1,131,8,43,"require"],[1,133,8,50,"d"],[1,135,8,50],[1,141,10,49,"e"],[1,143,10,51,"__esModule"],[1,154,10,64,"e"],[1,156,10,68],[1,157,10,70,"default"],[1,165,10,79,"e"],[1,168,9,4,"_PointerType"],[1,170,9,19,"require"],[1,172,9,26,"d"],[1,174,9,26],[1,178,11,0],[1,184,11,6,"KeyboardEventManager"],[1,194,11,35,"_EventManager"],[1,196,11,49,"default"],[1,204,12,2,"static"],[1,226,12,26],[1,227,12,27],[1,235,12,36],[1,240,13,2,"static"],[1,263,13,27],[1,264,13,28],[1,271,14,2,"isPressed"],[1,282,14,14],[1,284,15,2,"static"],[1,318,15,37],[1,320,16,2,"static"],[1,337,16,21],[1,341,16,25,"Set"],[1,345,17,2,"static"],[1,372,17,31,"event"],[1,377,22,46],[1,381,22,8,"this"],[1,386,22,13,"activationKeys"],[1,401,22,28,"indexOf"],[1,409,22,36,"event"],[1,411,22,42,"key"],[1,417,25,4,"this"],[1,422,25,9,"instances"],[1,432,25,19,"forEach"],[1,440,25,27,"item"],[1,444,26,6,"item"],[1,446,26,11,"onKeyUp"],[1,454,26,19,"event"],[1,460,29,2,"keyDownCallback"],[1,476,29,20,"event"],[1,481,30,63],[1,485,30,8,"KeyboardEventManager"],[1,487,30,29,"cancelationKeys"],[1,503,30,45,"indexOf"],[1,511,30,53,"event"],[1,513,30,59,"key"],[1,519,30,74,"this"],[1,524,30,79,"isPressed"],[1,534,31,6,"this"],[1,539,31,11,"dispatchEvent"],[1,553,31,25,"event"],[1,555,31,32,"_interfaces"],[1,557,31,44,"EventTypes"],[1,568,31,55,"CANCEL"],[1,577,34,62],[1,581,34,8,"KeyboardEventManager"],[1,583,34,29,"activationKeys"],[1,598,34,44,"indexOf"],[1,606,34,52,"event"],[1,608,34,58,"key"],[1,614,37,4,"this"],[1,619,37,9,"dispatchEvent"],[1,633,37,23,"event"],[1,635,37,30,"_interfaces"],[1,637,37,42,"EventTypes"],[1,648,37,53,"DOWN"],[1,655,39,2,"onKeyUp"],[1,663,39,12,"event"],[1,668,40,62],[1,672,40,8,"KeyboardEventManager"],[1,674,40,29,"activationKeys"],[1,689,40,44,"indexOf"],[1,697,40,52,"event"],[1,699,40,58,"key"],[1,705,40,74,"this"],[1,710,40,79,"isPressed"],[1,721,43,4,"this"],[1,726,43,9,"dispatchEvent"],[1,740,43,23,"event"],[1,742,43,30,"_interfaces"],[1,744,43,42,"EventTypes"],[1,755,43,53,"UP"],[1,760,45,2,"dispatchEvent"],[1,774,45,16,"event"],[1,776,45,23,"eventType"],[1,779,46,4],[1,784,46,10,"event"],[1,786,46,16,"target"],[1,804,46,34,"HTMLElement"],[1,817,47,6],[1,824,49,4],[1,830,49,10,"adaptedEvent"],[1,832,49,25,"this"],[1,837,49,30,"mapEvent"],[1,846,49,39,"event"],[1,848,49,46,"eventType"],[1,851,50,4],[1,858,50,12,"eventType"],[1,861,51,6],[1,866,51,11,"_interfaces"],[1,868,51,23,"EventTypes"],[1,879,51,34,"UP"],[1,882,52,8,"this"],[1,887,52,13,"isPressed"],[1,898,52,25],[1,900,53,8,"this"],[1,905,53,13,"onPointerUp"],[1,917,53,25,"adaptedEvent"],[1,920,54,8],[1,926,55,6],[1,931,55,11,"_interfaces"],[1,933,55,23,"EventTypes"],[1,944,55,34,"DOWN"],[1,949,56,8,"this"],[1,954,56,13,"isPressed"],[1,965,56,25],[1,967,57,8,"this"],[1,972,57,13,"onPointerDown"],[1,986,57,27,"adaptedEvent"],[1,989,58,8],[1,995,59,6],[1,1000,59,11,"_interfaces"],[1,1002,59,23,"EventTypes"],[1,1013,59,34,"CANCEL"],[1,1020,60,8,"this"],[1,1025,60,13,"isPressed"],[1,1036,60,25],[1,1038,61,8,"this"],[1,1043,61,13,"onPointerCancel"],[1,1059,61,29,"adaptedEvent"],[1,1062,64,2],[1,1063,65,2,"registerListeners"],[1,1083,66,4,"this"],[1,1088,66,9,"view"],[1,1093,66,14,"addEventListener"],[1,1110,66,31],[1,1120,66,42,"this"],[1,1125,66,47,"keyDownCallback"],[1,1142,67,4,"KeyboardEventManager"],[1,1144,67,25,"instances"],[1,1154,67,35,"add"],[1,1158,67,39,"this"],[1,1164,68,9,"KeyboardEventManager"],[1,1166,68,30,"registeredStaticListeners"],[1,1194,69,6,"KeyboardEventManager"],[1,1196,69,27,"registeredStaticListeners"],[1,1223,69,55],[1,1225,70,6,"document"],[1,1234,70,15,"addEventListener"],[1,1251,70,32],[1,1259,70,41,"KeyboardEventManager"],[1,1261,70,62,"keyUpStaticCallback"],[1,1281,70,83],[1,1282,71,8,"capture"],[1,1291,71,17],[1,1295,74,2],[1,1296,75,2,"unregisterListeners"],[1,1318,76,4,"this"],[1,1323,76,9,"view"],[1,1328,76,14,"removeEventListener"],[1,1348,76,34],[1,1358,76,45,"this"],[1,1363,76,50,"keyDownCallback"],[1,1380,77,4,"KeyboardEventManager"],[1,1382,77,25,"instances"],[1,1392,77,35,"delete"],[1,1399,77,42,"this"],[1,1405,78,48],[1,1409,78,8,"KeyboardEventManager"],[1,1411,78,29,"instances"],[1,1421,78,39,"size"],[1,1428,79,6,"document"],[1,1437,79,15,"removeEventListener"],[1,1457,79,35],[1,1465,79,44,"KeyboardEventManager"],[1,1467,79,65,"keyUpStaticCallback"],[1,1487,79,86],[1,1488,80,8,"capture"],[1,1497,80,17],[1,1501,82,6,"KeyboardEventManager"],[1,1503,82,27,"registeredStaticListeners"],[1,1530,82,55],[1,1532,84,2],[1,1533,85,2,"mapEvent"],[1,1542,85,11,"event"],[1,1544,85,18,"eventType"],[1,1547,86,4],[1,1553,86,10,"viewRect"],[1,1555,86,21,"event"],[1,1557,86,27,"target"],[1,1564,86,34,"getBoundingClientRect"],[1,1588,87,10,"viewportPosition"],[1,1590,87,29],[1,1591,88,6,"x"],[1,1593,88,9,"viewRect"],[1,1596,88,19,"x"],[1,1598,88,23,"viewRect"],[1,1601,88,33,"width"],[1,1607,88,41],[1,1609,89,6,"y"],[1,1611,89,9,"viewRect"],[1,1614,89,19,"y"],[1,1616,89,23,"viewRect"],[1,1619,89,33,"height"],[1,1626,89,42],[1,1629,91,10,"relativePosition"],[1,1631,91,29],[1,1632,92,6,"x"],[1,1634,92,9,"viewRect"],[1,1637,92,19,"width"],[1,1643,92,27],[1,1645,93,6,"y"],[1,1647,93,9,"viewRect"],[1,1650,93,19,"height"],[1,1657,93,28],[1,1660,95,4],[1,1666,95,11],[1,1667,96,6,"x"],[1,1669,96,9,"viewportPosition"],[1,1671,96,26,"x"],[1,1673,97,6,"y"],[1,1675,97,9,"viewportPosition"],[1,1677,97,26,"y"],[1,1679,98,6,"offsetX"],[1,1687,98,15,"relativePosition"],[1,1689,98,32,"x"],[1,1691,99,6,"offsetY"],[1,1699,99,15,"relativePosition"],[1,1701,99,32,"y"],[1,1703,100,6,"pointerId"],[1,1713,100,17],[1,1715,101,6,"eventType"],[1,1725,101,17,"eventType"],[1,1727,102,6,"pointerType"],[1,1739,102,19,"_PointerType"],[1,1741,102,32,"PointerType"],[1,1753,102,44,"KEY"],[1,1757,103,6,"time"],[1,1762,103,12,"event"],[1,1764,103,18,"timeStamp"],[1,1774,105,2],[1,1776,107,0,"exports"],[1,1779,107,8,"default"],[1,1787,107,18,"KeyboardEventManager"],[1,1788,107,39],[1,1791]],"functionMap":{"names":["<global>","_interopRequireDefault","KeyboardEventManager","keyUpStaticCallback","instances.forEach$argument_0","keyDownCallback","onKeyUp","dispatchEvent","registerListeners","unregisterListeners","mapEvent"],"mappings":"AAA;ACS,qFD;AEC;+BCM;2BCQ;KDE;GDC;oBGC;GHS;YIC;GJK;EKC;GLmB;EMC;GNS;EOC;GPS;EQC;GRoB;CFC"},"hasCjsExports":true},"type":"js/module"}]}