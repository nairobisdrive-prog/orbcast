{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"MOCK_DEVICES\", {\n    enumerable: true,\n    get: function () {\n      return MOCK_DEVICES;\n    }\n  });\n  Object.defineProperty(exports, \"SSDP_MULTICAST_ADDR\", {\n    enumerable: true,\n    get: function () {\n      return SSDP_MULTICAST_ADDR;\n    }\n  });\n  Object.defineProperty(exports, \"SSDP_PORT\", {\n    enumerable: true,\n    get: function () {\n      return SSDP_PORT;\n    }\n  });\n  Object.defineProperty(exports, \"SSDP_SEARCH_MSG\", {\n    enumerable: true,\n    get: function () {\n      return SSDP_SEARCH_MSG;\n    }\n  });\n  exports.parseSsdpResponse = parseSsdpResponse;\n  exports.discoverDevices = discoverDevices;\n  // ─── Mock Devices (Dev Mode) ──────────────────────────────────────────────────\n  const MOCK_DEVICES = [{\n    id: 'sonos-living-room',\n    name: 'Living Room',\n    room: 'Living Room',\n    ip: '192.168.1.101',\n    port: 1400,\n    status: 'online',\n    volume: 45,\n    isMuted: false,\n    modelName: 'Sonos Era 300'\n  }, {\n    id: 'sonos-kitchen',\n    name: 'Kitchen',\n    room: 'Kitchen',\n    ip: '192.168.1.102',\n    port: 1400,\n    status: 'online',\n    volume: 30,\n    isMuted: false,\n    modelName: 'Sonos Play:3'\n  }, {\n    id: 'sonos-bedroom',\n    name: 'Bedroom',\n    room: 'Bedroom',\n    ip: '192.168.1.103',\n    port: 1400,\n    status: 'offline',\n    volume: 0,\n    isMuted: true,\n    modelName: 'Sonos Era 100'\n  }, {\n    id: 'sonos-office',\n    name: 'Office',\n    room: 'Office',\n    ip: '192.168.1.104',\n    port: 1400,\n    status: 'online',\n    volume: 60,\n    isMuted: false,\n    modelName: 'Sonos Move 2'\n  }];\n\n  // ─── SSDP Discovery (Real — Requires Custom Dev Build with UDP support) ───────\n  const SSDP_MULTICAST_ADDR = '239.255.255.250';\n  const SSDP_PORT = 1900;\n  const SSDP_SEARCH_MSG = 'M-SEARCH * HTTP/1.1\\r\\n' + `HOST: ${SSDP_MULTICAST_ADDR}:${SSDP_PORT}\\r\\n` + 'MAN: \"ssdp:discover\"\\r\\n' + 'MX: 1\\r\\n' + 'ST: urn:schemas-upnp-org:device:ZonePlayer:1\\r\\n\\r\\n';\n\n  /**\n   * Parse a Sonos SSDP response into a partial device record.\n   * Used by the real discovery module (custom build only).\n   */\n  function parseSsdpResponse(raw) {\n    const lines = raw.split('\\r\\n');\n    const locationLine = lines.find(l => l.toLowerCase().startsWith('location:'));\n    if (!locationLine) return null;\n    const location = locationLine.split(': ')[1]?.trim();\n    if (!location) return null;\n    try {\n      const url = new URL(location);\n      return {\n        ip: url.hostname,\n        port: parseInt(url.port) || 1400,\n        status: 'online',\n        id: url.hostname,\n        // temporary, refined after XML fetch\n        name: 'Sonos Speaker',\n        room: 'Unknown Room',\n        volume: 0,\n        isMuted: false\n      };\n    } catch {\n      return null;\n    }\n  }\n\n  /**\n   * Discover Sonos devices.\n   * In Expo managed workflow this returns mock devices.\n   * In a custom dev build with react-native-udp, replace with real SSDP.\n   */\n  async function discoverDevices(onProgress) {\n    // Simulate scanning delay\n    await new Promise(r => setTimeout(r, 2000));\n    for (const device of MOCK_DEVICES) {\n      await new Promise(r => setTimeout(r, 400));\n      onProgress?.(device);\n    }\n    return MOCK_DEVICES;\n  }\n});","lineCount":123,"map":[[7,2,4,0,"Object"],[7,8,4,0],[7,9,4,0,"defineProperty"],[7,23,4,0],[7,24,4,0,"exports"],[7,31,4,0],[8,4,4,0,"enumerable"],[8,14,4,0],[9,4,4,0,"get"],[9,7,4,0],[9,18,4,0,"get"],[9,19,4,0],[10,6,4,0],[10,13,4,0,"MOCK_DEVICES"],[10,25,4,0],[11,4,4,0],[12,2,4,0],[13,2,52,0,"Object"],[13,8,52,0],[13,9,52,0,"defineProperty"],[13,23,52,0],[13,24,52,0,"exports"],[13,31,52,0],[14,4,52,0,"enumerable"],[14,14,52,0],[15,4,52,0,"get"],[15,7,52,0],[15,18,52,0,"get"],[15,19,52,0],[16,6,52,0],[16,13,52,0,"SSDP_MULTICAST_ADDR"],[16,32,52,0],[17,4,52,0],[18,2,52,0],[19,2,53,0,"Object"],[19,8,53,0],[19,9,53,0,"defineProperty"],[19,23,53,0],[19,24,53,0,"exports"],[19,31,53,0],[20,4,53,0,"enumerable"],[20,14,53,0],[21,4,53,0,"get"],[21,7,53,0],[21,18,53,0,"get"],[21,19,53,0],[22,6,53,0],[22,13,53,0,"SSDP_PORT"],[22,22,53,0],[23,4,53,0],[24,2,53,0],[25,2,54,0,"Object"],[25,8,54,0],[25,9,54,0,"defineProperty"],[25,23,54,0],[25,24,54,0,"exports"],[25,31,54,0],[26,4,54,0,"enumerable"],[26,14,54,0],[27,4,54,0,"get"],[27,7,54,0],[27,18,54,0,"get"],[27,19,54,0],[28,6,54,0],[28,13,54,0,"SSDP_SEARCH_MSG"],[28,28,54,0],[29,4,54,0],[30,2,54,0],[31,2,65,0,"exports"],[31,9,65,0],[31,10,65,0,"parseSsdpResponse"],[31,27,65,0],[31,30,65,0,"parseSsdpResponse"],[31,47,65,0],[32,2,94,0,"exports"],[32,9,94,0],[32,10,94,0,"discoverDevices"],[32,25,94,0],[32,28,94,0,"discoverDevices"],[32,43,94,0],[33,2,3,0],[34,2,4,7],[34,8,4,13,"MOCK_DEVICES"],[34,20,4,40],[34,23,4,43],[34,24,5,2],[35,4,6,4,"id"],[35,6,6,6],[35,8,6,8],[35,27,6,27],[36,4,7,4,"name"],[36,8,7,8],[36,10,7,10],[36,23,7,23],[37,4,8,4,"room"],[37,8,8,8],[37,10,8,10],[37,23,8,23],[38,4,9,4,"ip"],[38,6,9,6],[38,8,9,8],[38,23,9,23],[39,4,10,4,"port"],[39,8,10,8],[39,10,10,10],[39,14,10,14],[40,4,11,4,"status"],[40,10,11,10],[40,12,11,12],[40,20,11,20],[41,4,12,4,"volume"],[41,10,12,10],[41,12,12,12],[41,14,12,14],[42,4,13,4,"isMuted"],[42,11,13,11],[42,13,13,13],[42,18,13,18],[43,4,14,4,"modelName"],[43,13,14,13],[43,15,14,15],[44,2,15,2],[44,3,15,3],[44,5,16,2],[45,4,17,4,"id"],[45,6,17,6],[45,8,17,8],[45,23,17,23],[46,4,18,4,"name"],[46,8,18,8],[46,10,18,10],[46,19,18,19],[47,4,19,4,"room"],[47,8,19,8],[47,10,19,10],[47,19,19,19],[48,4,20,4,"ip"],[48,6,20,6],[48,8,20,8],[48,23,20,23],[49,4,21,4,"port"],[49,8,21,8],[49,10,21,10],[49,14,21,14],[50,4,22,4,"status"],[50,10,22,10],[50,12,22,12],[50,20,22,20],[51,4,23,4,"volume"],[51,10,23,10],[51,12,23,12],[51,14,23,14],[52,4,24,4,"isMuted"],[52,11,24,11],[52,13,24,13],[52,18,24,18],[53,4,25,4,"modelName"],[53,13,25,13],[53,15,25,15],[54,2,26,2],[54,3,26,3],[54,5,27,2],[55,4,28,4,"id"],[55,6,28,6],[55,8,28,8],[55,23,28,23],[56,4,29,4,"name"],[56,8,29,8],[56,10,29,10],[56,19,29,19],[57,4,30,4,"room"],[57,8,30,8],[57,10,30,10],[57,19,30,19],[58,4,31,4,"ip"],[58,6,31,6],[58,8,31,8],[58,23,31,23],[59,4,32,4,"port"],[59,8,32,8],[59,10,32,10],[59,14,32,14],[60,4,33,4,"status"],[60,10,33,10],[60,12,33,12],[60,21,33,21],[61,4,34,4,"volume"],[61,10,34,10],[61,12,34,12],[61,13,34,13],[62,4,35,4,"isMuted"],[62,11,35,11],[62,13,35,13],[62,17,35,17],[63,4,36,4,"modelName"],[63,13,36,13],[63,15,36,15],[64,2,37,2],[64,3,37,3],[64,5,38,2],[65,4,39,4,"id"],[65,6,39,6],[65,8,39,8],[65,22,39,22],[66,4,40,4,"name"],[66,8,40,8],[66,10,40,10],[66,18,40,18],[67,4,41,4,"room"],[67,8,41,8],[67,10,41,10],[67,18,41,18],[68,4,42,4,"ip"],[68,6,42,6],[68,8,42,8],[68,23,42,23],[69,4,43,4,"port"],[69,8,43,8],[69,10,43,10],[69,14,43,14],[70,4,44,4,"status"],[70,10,44,10],[70,12,44,12],[70,20,44,20],[71,4,45,4,"volume"],[71,10,45,10],[71,12,45,12],[71,14,45,14],[72,4,46,4,"isMuted"],[72,11,46,11],[72,13,46,13],[72,18,46,18],[73,4,47,4,"modelName"],[73,13,47,13],[73,15,47,15],[74,2,48,2],[74,3,48,3],[74,4,49,1],[76,2,51,0],[77,2,52,7],[77,8,52,13,"SSDP_MULTICAST_ADDR"],[77,27,52,32],[77,30,52,35],[77,47,52,52],[78,2,53,7],[78,8,53,13,"SSDP_PORT"],[78,17,53,22],[78,20,53,25],[78,24,53,29],[79,2,54,7],[79,8,54,13,"SSDP_SEARCH_MSG"],[79,23,54,28],[79,26,55,2],[79,51,55,27],[79,54,56,2],[79,63,56,11,"SSDP_MULTICAST_ADDR"],[79,82,56,30],[79,86,56,34,"SSDP_PORT"],[79,95,56,43],[79,101,56,49],[79,104,57,2],[79,130,57,28],[79,133,58,2],[79,144,58,13],[79,147,59,2],[79,201,59,56],[81,2,61,0],[82,0,62,0],[83,0,63,0],[84,0,64,0],[85,2,65,7],[85,11,65,16,"parseSsdpResponse"],[85,28,65,33,"parseSsdpResponse"],[85,29,65,34,"raw"],[85,32,65,45],[85,34,65,76],[86,4,66,2],[86,10,66,8,"lines"],[86,15,66,13],[86,18,66,16,"raw"],[86,21,66,19],[86,22,66,20,"split"],[86,27,66,25],[86,28,66,26],[86,34,66,32],[86,35,66,33],[87,4,67,2],[87,10,67,8,"locationLine"],[87,22,67,20],[87,25,67,23,"lines"],[87,30,67,28],[87,31,67,29,"find"],[87,35,67,33],[87,36,67,35,"l"],[87,37,67,36],[87,41,67,41,"l"],[87,42,67,42],[87,43,67,43,"toLowerCase"],[87,54,67,54],[87,55,67,55],[87,56,67,56],[87,57,67,57,"startsWith"],[87,67,67,67],[87,68,67,68],[87,79,67,79],[87,80,67,80],[87,81,67,81],[88,4,68,2],[88,8,68,6],[88,9,68,7,"locationLine"],[88,21,68,19],[88,23,68,21],[88,30,68,28],[88,34,68,32],[89,4,69,2],[89,10,69,8,"location"],[89,18,69,16],[89,21,69,19,"locationLine"],[89,33,69,31],[89,34,69,32,"split"],[89,39,69,37],[89,40,69,38],[89,44,69,42],[89,45,69,43],[89,46,69,44],[89,47,69,45],[89,48,69,46],[89,50,69,48,"trim"],[89,54,69,52],[89,55,69,53],[89,56,69,54],[90,4,70,2],[90,8,70,6],[90,9,70,7,"location"],[90,17,70,15],[90,19,70,17],[90,26,70,24],[90,30,70,28],[91,4,72,2],[91,8,72,6],[92,6,73,4],[92,12,73,10,"url"],[92,15,73,13],[92,18,73,16],[92,22,73,20,"URL"],[92,25,73,23],[92,26,73,24,"location"],[92,34,73,32],[92,35,73,33],[93,6,74,4],[93,13,74,11],[94,8,75,6,"ip"],[94,10,75,8],[94,12,75,10,"url"],[94,15,75,13],[94,16,75,14,"hostname"],[94,24,75,22],[95,8,76,6,"port"],[95,12,76,10],[95,14,76,12,"parseInt"],[95,22,76,20],[95,23,76,21,"url"],[95,26,76,24],[95,27,76,25,"port"],[95,31,76,29],[95,32,76,30],[95,36,76,34],[95,40,76,38],[96,8,77,6,"status"],[96,14,77,12],[96,16,77,14],[96,24,77,22],[97,8,78,6,"id"],[97,10,78,8],[97,12,78,10,"url"],[97,15,78,13],[97,16,78,14,"hostname"],[97,24,78,22],[98,8,78,24],[99,8,79,6,"name"],[99,12,79,10],[99,14,79,12],[99,29,79,27],[100,8,80,6,"room"],[100,12,80,10],[100,14,80,12],[100,28,80,26],[101,8,81,6,"volume"],[101,14,81,12],[101,16,81,14],[101,17,81,15],[102,8,82,6,"isMuted"],[102,15,82,13],[102,17,82,15],[103,6,83,4],[103,7,83,5],[104,4,84,2],[104,5,84,3],[104,6,84,4],[104,12,84,10],[105,6,85,4],[105,13,85,11],[105,17,85,15],[106,4,86,2],[107,2,87,0],[109,2,89,0],[110,0,90,0],[111,0,91,0],[112,0,92,0],[113,0,93,0],[114,2,94,7],[114,17,94,22,"discoverDevices"],[114,32,94,37,"discoverDevices"],[114,33,95,2,"onProgress"],[114,43,95,44],[114,45,96,26],[115,4,97,2],[116,4,98,2],[116,10,98,8],[116,14,98,12,"Promise"],[116,21,98,19],[116,22,98,21,"r"],[116,23,98,22],[116,27,98,27,"setTimeout"],[116,37,98,37],[116,38,98,38,"r"],[116,39,98,39],[116,41,98,41],[116,45,98,45],[116,46,98,46],[116,47,98,47],[117,4,100,2],[117,9,100,7],[117,15,100,13,"device"],[117,21,100,19],[117,25,100,23,"MOCK_DEVICES"],[117,37,100,35],[117,39,100,37],[118,6,101,4],[118,12,101,10],[118,16,101,14,"Promise"],[118,23,101,21],[118,24,101,23,"r"],[118,25,101,24],[118,29,101,29,"setTimeout"],[118,39,101,39],[118,40,101,40,"r"],[118,41,101,41],[118,43,101,43],[118,46,101,46],[118,47,101,47],[118,48,101,48],[119,6,102,4,"onProgress"],[119,16,102,14],[119,19,102,17,"device"],[119,25,102,23],[119,26,102,24],[120,4,103,2],[121,4,105,2],[121,11,105,9,"MOCK_DEVICES"],[121,23,105,21],[122,2,106,0],[123,0,106,1],[123,3]],"functionMap":{"names":["<global>","parseSsdpResponse","lines.find$argument_0","discoverDevices","Promise$argument_0"],"mappings":"AAA;OCgE;kCCE,8CD;CDoB;OGO;oBCI,0BD;sBCG,yBD;CHK"},"hasCjsExports":false},"type":"js/module"}]}